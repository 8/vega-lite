"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var chai_1 = require("chai");
var util_1 = require("./util");
['single', 'multi'].forEach(function (type) {
    describe(type + " selections at runtime in unit views", function () {
        var hits = util_1.hits.discrete;
        var embed = util_1.embedFn(browser);
        var testRender = util_1.testRenderFn(browser, type + "/unit");
        it('should add values to the store', function () {
            for (var i = 0; i < hits.qq.length; i++) {
                embed(util_1.spec('unit', i, { type: type }));
                var store = browser.execute(util_1.pt('qq', i)).value;
                chai_1.assert.lengthOf(store, 1);
                chai_1.assert.lengthOf(store[0].encodings, 0);
                chai_1.assert.lengthOf(store[0].fields, 1);
                chai_1.assert.lengthOf(store[0].values, 1);
                testRender("click_" + i);
            }
        });
        it('should respect projections', function () {
            var values = [];
            var encodings = [];
            var fields = [];
            var test = function (emb) {
                for (var i = 0; i < hits.qq.length; i++) {
                    emb(i);
                    var store = browser.execute(util_1.pt('qq', i)).value;
                    chai_1.assert.lengthOf(store, 1);
                    chai_1.assert.deepEqual(store[0].encodings, encodings);
                    chai_1.assert.deepEqual(store[0].fields, fields);
                    chai_1.assert.deepEqual(store[0].values, values[i]);
                    testRender(encodings + "_" + fields + "_" + i);
                }
            };
            encodings = ['x', 'color'];
            fields = ['a', 'c'];
            values = [[2, 1], [6, 0]];
            test(function (i) { return embed(util_1.spec('unit', i, { type: type, encodings: encodings })); });
            encodings = [];
            fields = ['c', 'a', 'b'];
            values = [[1, 2, 53], [0, 6, 87]];
            test(function (i) { return embed(util_1.spec('unit', i, { type: type, fields: fields })); });
        });
        it('should clear out the store', function () {
            for (var i = 0; i < hits.qq_clear.length; i++) {
                embed(util_1.spec('unit', i, { type: type }));
                var store = browser.execute(util_1.pt('qq', i)).value;
                chai_1.assert.lengthOf(store, 1);
                store = browser.execute(util_1.pt('qq_clear', i)).value;
                chai_1.assert.lengthOf(store, 0);
                testRender("clear_" + i);
            }
        });
        it('should support selecting bins', function () {
            var encodings = ['x', 'color', 'y'];
            var fields = ['a', 'c', 'b'];
            var values = [[[1, 2], 0, [40, 50]], [[8, 9], 1, [10, 20]]];
            for (var i = 0; i < hits.bins.length; i++) {
                embed(util_1.spec('unit', i, { type: type, encodings: encodings }, { x: { bin: true }, y: { bin: true } }));
                var store = browser.execute(util_1.pt('bins', i)).value;
                chai_1.assert.lengthOf(store, 1);
                chai_1.assert.sameMembers(store[0].encodings, encodings);
                chai_1.assert.sameMembers(store[0].fields, fields);
                chai_1.assert.sameDeepMembers(store[0].values, values[i]);
                chai_1.assert.property(store[0], 'bin_a');
                chai_1.assert.property(store[0], 'bin_b');
                chai_1.assert.notProperty(store[0], 'bin_c');
                testRender("bins_" + i);
            }
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3JldGUudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QtcnVudGltZS9kaXNjcmV0ZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkJBQTRCO0FBQzVCLCtCQUEyRTtBQUUzRSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBUyxJQUFJO0lBQ3ZDLFFBQVEsQ0FBSSxJQUFJLHlDQUFzQyxFQUFFO1FBQ3RELElBQU0sSUFBSSxHQUFHLFdBQVUsQ0FBQyxRQUFRLENBQUM7UUFDakMsSUFBTSxLQUFLLEdBQUcsY0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLElBQU0sVUFBVSxHQUFHLG1CQUFZLENBQUMsT0FBTyxFQUFLLElBQUksVUFBTyxDQUFDLENBQUM7UUFFekQsRUFBRSxDQUFDLGdDQUFnQyxFQUFFO1lBQ25DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDdkMsS0FBSyxDQUFDLFdBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUMsSUFBSSxNQUFBLEVBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQy9CLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDakQsYUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFCLGFBQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDdkMsYUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNwQyxh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Q0FBQztnQkFDNUUsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUNuRCxhQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDMUIsYUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dCQUNsRCxhQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQzVDLGFBQU0sQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkQsYUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ25DLGFBQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNuQyxhQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDdEMsVUFBVSxDQUFDLFVBQVEsQ0FBRyxDQUFDLENBQUM7YUFDekI7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2Fzc2VydH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQge2VtYmVkRm4sIGhpdHMgYXMgaGl0c01hc3RlciwgcHQsIHNwZWMsIHRlc3RSZW5kZXJGbn0gZnJvbSAnLi91dGlsJztcblxuWydzaW5nbGUnLCAnbXVsdGknXS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUpIHtcbiAgZGVzY3JpYmUoYCR7dHlwZX0gc2VsZWN0aW9ucyBhdCBydW50aW1lIGluIHVuaXQgdmlld3NgLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBoaXRzID0gaGl0c01hc3Rlci5kaXNjcmV0ZTtcbiAgICBjb25zdCBlbWJlZCA9IGVtYmVkRm4oYnJvd3Nlcik7XG4gICAgY29uc3QgdGVzdFJlbmRlciA9IHRlc3RSZW5kZXJGbihicm93c2VyLCBgJHt0eXBlfS91bml0YCk7XG5cbiAgICBpdCgnc2hvdWxkIGFkZCB2YWx1ZXMgdG8gdGhlIHN0b3JlJywgZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdHMucXEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZW1iZWQoc3BlYygndW5pdCcsIGksIHt0eXBlfSkpO1xuICAgICAgICBjb25zdCBzdG9yZSA9IGJyb3dzZXIuZXhlY3V0ZShwdCgncXEnLCBpKSkudmFsdWU7XG4gICAgICAgIGFzc2VydC5sZW5ndGhPZihzdG9yZSwgMSk7XG4gICAgICAgIGFzc2VydC5sZW5ndGhPZihzdG9yZVswXS5lbmNvZGluZ3MsIDApO1xuICAgICAgICBhc3NlcnQubGVuZ3RoT2Yoc3RvcmVbMF0uZmllbGRzLCAxKTtcbiAgICAgICAgYXNzZXJ0Lmxlbmd0aE9mKHN0b3JlWzBdLnZhbHVlcywgMSk7XG4gICAgICAgIHRlc3RSZW5kZXIoYGNsaWNrXyR7aX1gKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVzcGVjdCBwcm9qZWN0aW9ucycsIGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHZhbHVlczpudW1iZXJbXVtdID0gW107XG4gICAgICBsZXQgZW5jb2RpbmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgbGV0IGZpZWxkczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGNvbnN0IHRlc3QgPSAoZW1iOiBGdW5jdGlvbikgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdHMucXEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBlbWIoaSk7XG4gICAgICAgICAgY29uc3Qgc3RvcmUgPSBicm93c2VyLmV4ZWN1dGUocHQoJ3FxJywgaSkpLnZhbHVlO1xuICAgICAgICAgIGFzc2VydC5sZW5ndGhPZihzdG9yZSwgMSk7XG4gICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChzdG9yZVswXS5lbmNvZGluZ3MsIGVuY29kaW5ncyk7XG4gICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChzdG9yZVswXS5maWVsZHMsIGZpZWxkcyk7XG4gICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChzdG9yZVswXS52YWx1ZXMsIHZhbHVlc1tpXSk7XG4gICAgICAgICAgdGVzdFJlbmRlcihgJHtlbmNvZGluZ3N9XyR7ZmllbGRzfV8ke2l9YCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGVuY29kaW5ncyA9IFsneCcsICdjb2xvciddO1xuICAgICAgZmllbGRzID0gWydhJywgJ2MnXTtcbiAgICAgIHZhbHVlcyA9IFtbMiwgMV0sIFs2LCAwXV07XG4gICAgICB0ZXN0KChpOiBudW1iZXIpID0+IGVtYmVkKHNwZWMoJ3VuaXQnLCBpLCB7dHlwZSwgZW5jb2RpbmdzfSkpKTtcblxuICAgICAgZW5jb2RpbmdzID0gW107XG4gICAgICBmaWVsZHMgPSBbJ2MnLCAnYScsICdiJ107XG4gICAgICB2YWx1ZXMgPSBbWzEsIDIsIDUzXSwgWzAsIDYsIDg3XV07XG4gICAgICB0ZXN0KChpOiBudW1iZXIpID0+IGVtYmVkKHNwZWMoJ3VuaXQnLCBpLCB7dHlwZSwgZmllbGRzfSkpKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYXIgb3V0IHRoZSBzdG9yZScsIGZ1bmN0aW9uKCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLnFxX2NsZWFyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVtYmVkKHNwZWMoJ3VuaXQnLCBpLCB7dHlwZX0pKTtcbiAgICAgICAgbGV0IHN0b3JlID0gYnJvd3Nlci5leGVjdXRlKHB0KCdxcScsIGkpKS52YWx1ZTtcbiAgICAgICAgYXNzZXJ0Lmxlbmd0aE9mKHN0b3JlLCAxKTtcblxuICAgICAgICBzdG9yZSA9IGJyb3dzZXIuZXhlY3V0ZShwdCgncXFfY2xlYXInLCBpKSkudmFsdWU7XG4gICAgICAgIGFzc2VydC5sZW5ndGhPZihzdG9yZSwgMCk7XG4gICAgICAgIHRlc3RSZW5kZXIoYGNsZWFyXyR7aX1gKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBzZWxlY3RpbmcgYmlucycsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgZW5jb2RpbmdzID0gWyd4JywgJ2NvbG9yJywgJ3knXTtcbiAgICAgIGNvbnN0IGZpZWxkcyA9IFsnYScsICdjJywgJ2InXTtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IFtbWzEsIDJdLCAwLCBbNDAsIDUwXV0sIFtbOCwgOV0sIDEsIFsxMCwgMjBdXV07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGl0cy5iaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVtYmVkKHNwZWMoJ3VuaXQnLCBpLCB7dHlwZSwgZW5jb2RpbmdzfSwge3g6IHtiaW46IHRydWV9LCB5OiB7YmluOiB0cnVlfX0pKTtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBicm93c2VyLmV4ZWN1dGUocHQoJ2JpbnMnLCBpKSkudmFsdWU7XG4gICAgICAgIGFzc2VydC5sZW5ndGhPZihzdG9yZSwgMSk7XG4gICAgICAgIGFzc2VydC5zYW1lTWVtYmVycyhzdG9yZVswXS5lbmNvZGluZ3MsIGVuY29kaW5ncyk7XG4gICAgICAgIGFzc2VydC5zYW1lTWVtYmVycyhzdG9yZVswXS5maWVsZHMsIGZpZWxkcyk7XG4gICAgICAgIGFzc2VydC5zYW1lRGVlcE1lbWJlcnMoc3RvcmVbMF0udmFsdWVzLCB2YWx1ZXNbaV0pO1xuICAgICAgICBhc3NlcnQucHJvcGVydHkoc3RvcmVbMF0sICdiaW5fYScpO1xuICAgICAgICBhc3NlcnQucHJvcGVydHkoc3RvcmVbMF0sICdiaW5fYicpO1xuICAgICAgICBhc3NlcnQubm90UHJvcGVydHkoc3RvcmVbMF0sICdiaW5fYycpO1xuICAgICAgICB0ZXN0UmVuZGVyKGBiaW5zXyR7aX1gKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==