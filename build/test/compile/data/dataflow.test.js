"use strict";
/* tslint:disable:quotemark */
Object.defineProperty(exports, "__esModule", { value: true });
var chai_1 = require("chai");
var dataflow_1 = require("../../../src/compile/data/dataflow");
describe('compile/data/dataflow', function () {
    describe('DataFlowNode', function () {
        describe('swap', function () {
            it('should correctly swap two nodes in a simple chain', function () {
                var a = new dataflow_1.DataFlowNode(null, 'a');
                var b = new dataflow_1.DataFlowNode(a, 'b');
                var c = new dataflow_1.DataFlowNode(b, 'c');
                var d = new dataflow_1.DataFlowNode(c, 'd');
                c.swapWithParent();
                chai_1.assert.equal(a.numChildren(), 1);
                chai_1.assert.equal(a.children[0].debugName, 'c');
                chai_1.assert.equal(b.numChildren(), 1);
                chai_1.assert.equal(b.children[0].debugName, 'd');
                chai_1.assert.equal(c.numChildren(), 1);
                chai_1.assert.equal(c.children[0].debugName, 'b');
                chai_1.assert.equal(d.numChildren(), 0);
            });
            it('should correctly swap two nodes', function () {
                var root = new dataflow_1.DataFlowNode(null, 'root');
                var parent = new dataflow_1.DataFlowNode(root, 'parent');
                var node = new dataflow_1.DataFlowNode(parent, 'node');
                var child1 = new dataflow_1.DataFlowNode(node, 'child1');
                var child2 = new dataflow_1.DataFlowNode(node, 'child2');
                var parentChild1 = new dataflow_1.DataFlowNode(parent, 'parentChild1');
                var parentChild2 = new dataflow_1.DataFlowNode(parent, 'parentChild2');
                node.swapWithParent();
                chai_1.assert.equal(root.numChildren(), 1);
                chai_1.assert.equal(root.children[0].debugName, 'node');
                chai_1.assert.equal(node.parent.debugName, 'root');
                chai_1.assert.equal(node.numChildren(), 1);
                chai_1.assert.equal(node.children[0].debugName, 'parent');
                chai_1.assert.equal(parent.parent.debugName, 'node');
                chai_1.assert.equal(parent.numChildren(), 4);
                parent.children.forEach(function (c) {
                    chai_1.assert.equal(c.numChildren(), 0);
                    chai_1.assert.equal(c.parent.debugName, 'parent');
                });
                chai_1.assert.equal(child1.debugName, 'child1');
                chai_1.assert.equal(child2.debugName, 'child2');
                chai_1.assert.equal(parentChild1.debugName, 'parentChild1');
                chai_1.assert.equal(parentChild2.debugName, 'parentChild2');
            });
        });
        describe('remove', function () {
            it('should remove node from dataflow', function () {
                var a = new dataflow_1.DataFlowNode(null, 'a');
                var b = new dataflow_1.DataFlowNode(a, 'b');
                var c = new dataflow_1.DataFlowNode(b, 'c');
                chai_1.assert.deepEqual(a.children, [b]);
                chai_1.assert.equal(b.parent, a);
                chai_1.assert.equal(c.parent, b);
                b.remove();
                chai_1.assert.deepEqual(a.children, [c]);
                chai_1.assert.equal(c.parent, a);
            });
        });
        describe('insertAsParentOf', function () {
            it('should insert node into dataflow', function () {
                var a = new dataflow_1.DataFlowNode(null, 'a');
                var anotherChild = new dataflow_1.DataFlowNode(a, 'a');
                var b = new dataflow_1.DataFlowNode(null, 'b');
                var c = new dataflow_1.DataFlowNode(a, 'c');
                b.insertAsParentOf(c);
                chai_1.assert.sameDeepMembers(a.children, [anotherChild, b]);
                chai_1.assert.equal(b.parent, a);
                chai_1.assert.equal(c.parent, b);
                chai_1.assert.equal(anotherChild.parent, a);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWZsb3cudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3QvY29tcGlsZS9kYXRhL2RhdGFmbG93LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDhCQUE4Qjs7QUFFOUIsNkJBQTRCO0FBQzVCLCtEQUFnRTtBQUVoRSxRQUFRLENBQUMsdUJBQXVCLEVBQUU7SUFDaEMsUUFBUSxDQUFDLGNBQWMsRUFBRTtRQUN2QixRQUFRLENBQUMsTUFBTSxFQUFFO1lBQ2YsRUFBRSxDQUFDLG1EQUFtRCxFQUFFO2dCQUN0RCxJQUFNLENBQUMsR0FBRyxJQUFJLHVCQUFZLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUN0QyxJQUFNLENBQUMsR0FBRyxJQUFJLHVCQUFZLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUVuQyxJQUFNLENBQUMsR0FBRyxJQUFJLHVCQUFZLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUVuQyxJQUFNLENBQUMsR0FBRyxJQUFJLHVCQUFZLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUVuQyxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBRW5CLGFBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNqQyxhQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUUzQyxhQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDakMsYUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztnQkFFM0MsYUFBTSxDQUFDLEtBQUss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QUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXRCLGFBQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN0RCxhQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFCLGFBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDMUIsYUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6cXVvdGVtYXJrICovXG5cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICdjaGFpJztcbmltcG9ydCB7RGF0YUZsb3dOb2RlfSBmcm9tICcuLi8uLi8uLi9zcmMvY29tcGlsZS9kYXRhL2RhdGFmbG93JztcblxuZGVzY3JpYmUoJ2NvbXBpbGUvZGF0YS9kYXRhZmxvdycsIGZ1bmN0aW9uKCkge1xuICBkZXNjcmliZSgnRGF0YUZsb3dOb2RlJywgZnVuY3Rpb24oKSB7XG4gICAgZGVzY3JpYmUoJ3N3YXAnLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIGNvcnJlY3RseSBzd2FwIHR3byBub2RlcyBpbiBhIHNpbXBsZSBjaGFpbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBhID0gbmV3IERhdGFGbG93Tm9kZShudWxsLCAnYScpO1xuICAgICAgICBjb25zdCBiID0gbmV3IERhdGFGbG93Tm9kZShhLCAnYicpO1xuXG4gICAgICAgIGNvbnN0IGMgPSBuZXcgRGF0YUZsb3dOb2RlKGIsICdjJyk7XG5cbiAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRhRmxvd05vZGUoYywgJ2QnKTtcblxuICAgICAgICBjLnN3YXBXaXRoUGFyZW50KCk7XG5cbiAgICAgICAgYXNzZXJ0LmVxdWFsKGEubnVtQ2hpbGRyZW4oKSwgMSk7XG4gICAgICAgIGFzc2VydC5lcXVhbChhLmNoaWxkcmVuWzBdLmRlYnVnTmFtZSwgJ2MnKTtcblxuICAgICAgICBhc3NlcnQuZXF1YWwoYi5udW1DaGlsZHJlbigpLCAxKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGIuY2hpbGRyZW5bMF0uZGVidWdOYW1lLCAnZCcpO1xuXG4gICAgICAgIGFzc2VydC5lcXVhbChjLm51bUNoaWxkcmVuKCksIDEpO1xuICAgICAgICBhc3NlcnQuZXF1YWwoYy5jaGlsZHJlblswXS5kZWJ1Z05hbWUsICdiJyk7XG5cbiAgICAgICAgYXNzZXJ0LmVxdWFsKGQubnVtQ2hpbGRyZW4oKSwgMCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjb3JyZWN0bHkgc3dhcCB0d28gbm9kZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IG5ldyBEYXRhRmxvd05vZGUobnVsbCwgJ3Jvb3QnKTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gbmV3IERhdGFGbG93Tm9kZShyb290LCAncGFyZW50Jyk7XG5cbiAgICAgICAgY29uc3Qgbm9kZSA9IG5ldyBEYXRhRmxvd05vZGUocGFyZW50LCAnbm9kZScpO1xuXG4gICAgICAgIGNvbnN0IGNoaWxkMSA9IG5ldyBEYXRhRmxvd05vZGUobm9kZSwgJ2NoaWxkMScpO1xuICAgICAgICBjb25zdCBjaGlsZDIgPSBuZXcgRGF0YUZsb3dOb2RlKG5vZGUsICdjaGlsZDInKTtcblxuICAgICAgICBjb25zdCBwYXJlbnRDaGlsZDEgPSBuZXcgRGF0YUZsb3dOb2RlKHBhcmVudCwgJ3BhcmVudENoaWxkMScpO1xuICAgICAgICBjb25zdCBwYXJlbnRDaGlsZDIgPSBuZXcgRGF0YUZsb3dOb2RlKHBhcmVudCwgJ3BhcmVudENoaWxkMicpO1xuXG4gICAgICAgIG5vZGUuc3dhcFdpdGhQYXJlbnQoKTtcblxuICAgICAgICBhc3NlcnQuZXF1YWwocm9vdC5udW1DaGlsZHJlbigpLCAxKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKHJvb3QuY2hpbGRyZW5bMF0uZGVidWdOYW1lLCAnbm9kZScpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobm9kZS5wYXJlbnQuZGVidWdOYW1lLCAncm9vdCcpO1xuXG4gICAgICAgIGFzc2VydC5lcXVhbChub2RlLm51bUNoaWxkcmVuKCksIDEpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobm9kZS5jaGlsZHJlblswXS5kZWJ1Z05hbWUsICdwYXJlbnQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKHBhcmVudC5wYXJlbnQuZGVidWdOYW1lLCAnbm9kZScpO1xuXG4gICAgICAgIGFzc2VydC5lcXVhbChwYXJlbnQubnVtQ2hpbGRyZW4oKSwgNCk7XG4gICAgICAgIHBhcmVudC5jaGlsZHJlbi5mb3JFYWNoKGMgPT4ge1xuICAgICAgICAgIGFzc2VydC5lcXVhbChjLm51bUNoaWxkcmVuKCksIDApO1xuICAgICAgICAgIGFzc2VydC5lcXVhbChjLnBhcmVudC5kZWJ1Z05hbWUsICdwYXJlbnQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXNzZXJ0LmVxdWFsKGNoaWxkMS5kZWJ1Z05hbWUsICdjaGlsZDEnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGNoaWxkMi5kZWJ1Z05hbWUsICdjaGlsZDInKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKHBhcmVudENoaWxkMS5kZWJ1Z05hbWUsICdwYXJlbnRDaGlsZDEnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKHBhcmVudENoaWxkMi5kZWJ1Z05hbWUsICdwYXJlbnRDaGlsZDInKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3JlbW92ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgaXQoJ3Nob3VsZCByZW1vdmUgbm9kZSBmcm9tIGRhdGFmbG93JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGEgPSBuZXcgRGF0YUZsb3dOb2RlKG51bGwsICdhJyk7XG4gICAgICAgIGNvbnN0IGIgPSBuZXcgRGF0YUZsb3dOb2RlKGEsICdiJyk7XG5cbiAgICAgICAgY29uc3QgYyA9IG5ldyBEYXRhRmxvd05vZGUoYiwgJ2MnKTtcblxuICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKGEuY2hpbGRyZW4sIFtiXSk7XG4gICAgICAgIGFzc2VydC5lcXVhbChiLnBhcmVudCwgYSk7XG4gICAgICAgIGFzc2VydC5lcXVhbChjLnBhcmVudCwgYik7XG5cbiAgICAgICAgYi5yZW1vdmUoKTtcblxuICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKGEuY2hpbGRyZW4sIFtjXSk7XG4gICAgICAgIGFzc2VydC5lcXVhbChjLnBhcmVudCwgYSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdpbnNlcnRBc1BhcmVudE9mJywgZnVuY3Rpb24oKSB7XG4gICAgICBpdCgnc2hvdWxkIGluc2VydCBub2RlIGludG8gZGF0YWZsb3cnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgYSA9IG5ldyBEYXRhRmxvd05vZGUobnVsbCwgJ2EnKTtcbiAgICAgICAgY29uc3QgYW5vdGhlckNoaWxkID0gbmV3IERhdGFGbG93Tm9kZShhLCAnYScpO1xuICAgICAgICBjb25zdCBiID0gbmV3IERhdGFGbG93Tm9kZShudWxsLCAnYicpO1xuICAgICAgICBjb25zdCBjID0gbmV3IERhdGFGbG93Tm9kZShhLCAnYycpO1xuXG4gICAgICAgIGIuaW5zZXJ0QXNQYXJlbnRPZihjKTtcblxuICAgICAgICBhc3NlcnQuc2FtZURlZXBNZW1iZXJzKGEuY2hpbGRyZW4sIFthbm90aGVyQ2hpbGQsIGJdKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGIucGFyZW50LCBhKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGMucGFyZW50LCBiKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGFub3RoZXJDaGlsZC5wYXJlbnQsIGEpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=