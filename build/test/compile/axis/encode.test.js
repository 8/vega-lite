/* tslint:disable:quotemark */
import { assert } from 'chai';
import * as encode from '../../../src/compile/axis/encode';
import { labelAlign, labelBaseline } from '../../../src/compile/axis/encode';
import { parseUnitModelWithScale } from '../../util';
describe('compile/axis/encode', function () {
    describe('encode.labels()', function () {
        it('should not rotate label for temporal field by default', function () {
            var model = parseUnitModelWithScale({
                mark: "point",
                encoding: {
                    x: { field: "a", type: "temporal", timeUnit: "month" }
                }
            });
            var labels = encode.labels(model, 'x', {}, 'bottom');
            assert.isUndefined(labels.angle);
        });
        it('should do not rotate label for temporal field if labelAngle is specified in axis config', function () {
            var model = parseUnitModelWithScale({
                mark: "point",
                encoding: {
                    x: { field: "a", type: "temporal", timeUnit: "month" }
                },
                config: { axisX: { labelAngle: 90 } }
            });
            var labels = encode.labels(model, 'x', {}, 'bottom');
            assert.isUndefined(labels.angle);
        });
        it('should have correct text.signal for quarter timeUnits', function () {
            var model = parseUnitModelWithScale({
                mark: "point",
                encoding: {
                    x: { field: "a", type: "temporal", timeUnit: "quarter" }
                }
            });
            var labels = encode.labels(model, 'x', {}, 'bottom');
            var expected = "'Q' + quarter(datum.value)";
            assert.equal(labels.text.signal, expected);
        });
        it('should have correct text.signal for yearquartermonth timeUnits', function () {
            var model = parseUnitModelWithScale({
                mark: "point",
                encoding: {
                    x: { field: "a", type: "temporal", timeUnit: "yearquartermonth" }
                }
            });
            var labels = encode.labels(model, 'x', {}, 'bottom');
            var expected = "'Q' + quarter(datum.value) + ' ' + timeFormat(datum.value, '%b %Y')";
            assert.equal(labels.text.signal, expected);
        });
    });
    describe('labelAlign', function () {
        describe('horizontal orients', function () {
            it('360 degree check for horizonatal orients return to see if they orient properly', function () {
                assert.equal(labelAlign(0, 'top'), 'center');
                assert.equal(labelAlign(15, 'top'), 'right');
                assert.equal(labelAlign(30, 'top'), 'right');
                assert.equal(labelAlign(45, 'top'), 'right');
                assert.equal(labelAlign(60, 'top'), 'right');
                assert.equal(labelAlign(75, 'top'), 'right');
                assert.equal(labelAlign(90, 'top'), 'right');
                assert.equal(labelAlign(105, 'top'), 'right');
                assert.equal(labelAlign(120, 'top'), 'right');
                assert.equal(labelAlign(135, 'top'), 'right');
                assert.equal(labelAlign(150, 'top'), 'right');
                assert.equal(labelAlign(165, 'top'), 'right');
                assert.equal(labelAlign(180, 'top'), 'center');
                assert.equal(labelAlign(195, 'bottom'), 'right');
                assert.equal(labelAlign(210, 'bottom'), 'right');
                assert.equal(labelAlign(225, 'bottom'), 'right');
                assert.equal(labelAlign(240, 'bottom'), 'right');
                assert.equal(labelAlign(255, 'bottom'), 'right');
                assert.equal(labelAlign(270, 'bottom'), 'right');
                assert.equal(labelAlign(285, 'bottom'), 'right');
                assert.equal(labelAlign(300, 'bottom'), 'right');
                assert.equal(labelAlign(315, 'bottom'), 'right');
                assert.equal(labelAlign(330, 'bottom'), 'right');
                assert.equal(labelAlign(345, 'bottom'), 'right');
            });
            it('360 degree check for vertical orients return to see if they orient properly', function () {
                assert.equal(labelAlign(0, 'left'), 'right');
                assert.equal(labelAlign(15, 'left'), 'right');
                assert.equal(labelAlign(30, 'left'), 'right');
                assert.equal(labelAlign(45, 'left'), 'right');
                assert.equal(labelAlign(60, 'left'), 'right');
                assert.equal(labelAlign(75, 'left'), 'right');
                assert.equal(labelAlign(90, 'left'), 'center');
                assert.equal(labelAlign(105, 'left'), 'left');
                assert.equal(labelAlign(120, 'left'), 'left');
                assert.equal(labelAlign(135, 'left'), 'left');
                assert.equal(labelAlign(150, 'left'), 'left');
                assert.equal(labelAlign(165, 'left'), 'left');
                assert.equal(labelAlign(180, 'left'), 'left');
                assert.equal(labelAlign(195, 'right'), 'right');
                assert.equal(labelAlign(210, 'right'), 'right');
                assert.equal(labelAlign(225, 'right'), 'right');
                assert.equal(labelAlign(240, 'right'), 'right');
                assert.equal(labelAlign(255, 'right'), 'right');
                assert.equal(labelAlign(270, 'right'), 'center');
                assert.equal(labelAlign(285, 'right'), 'left');
                assert.equal(labelAlign(300, 'right'), 'left');
                assert.equal(labelAlign(315, 'right'), 'left');
                assert.equal(labelAlign(330, 'right'), 'left');
                assert.equal(labelAlign(345, 'right'), 'left');
            });
        });
    });
    describe('labelBaseline', function () {
        it('is middle for perpendiculars horizontal orients', function () {
            assert.deepEqual(labelBaseline(90, 'top'), { value: 'middle' });
            assert.deepEqual(labelBaseline(270, 'bottom'), { value: 'middle' });
        });
        it('is top for bottom orients for 1st and 4th quadrants', function () {
            assert.deepEqual(labelBaseline(45, 'bottom'), { value: 'top' });
            assert.deepEqual(labelBaseline(180, 'top'), { value: 'top' });
        });
        it('is bottom for bottom orients for 2nd and 3rd quadrants', function () {
            assert.deepEqual(labelBaseline(100, 'bottom'), { value: 'middle' });
            assert.deepEqual(labelBaseline(260, 'bottom'), { value: 'middle' });
        });
        it('is middle for 0 and 180 horizontal orients', function () {
            assert.deepEqual(labelBaseline(0, 'left'), { value: 'middle' });
            assert.deepEqual(labelBaseline(180, 'right'), { value: 'middle' });
        });
        it('is top for bottom orients for 1st and 2nd quadrants', function () {
            assert.deepEqual(labelBaseline(80, 'left'), { value: 'top' });
            assert.deepEqual(labelBaseline(100, 'left'), { value: 'top' });
        });
        it('is bottom for bottom orients for 3rd and 4th quadrants', function () {
            assert.deepEqual(labelBaseline(280, 'left'), { value: 'bottom' });
            assert.deepEqual(labelBaseline(260, 'left'), { value: 'bottom' });
        });
        it('is bottom for bottom orients for 3rd and 4th quadrants', function () {
            assert.deepEqual(labelBaseline(280, 'left'), { value: 'bottom' });
            assert.deepEqual(labelBaseline(260, 'left'), { value: 'bottom' });
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW5jb2RlLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90ZXN0L2NvbXBpbGUvYXhpcy9lbmNvZGUudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw4QkFBOEI7QUFFOUIsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLE1BQU0sQ0FBQztBQUU1QixPQUFPLEtBQUssTUFBTSxNQUFNLGtDQUFrQyxDQUFDO0FBQzNELE9BQU8sRUFBQyxVQUFVLEVBQUUsYUFBYSxFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFDM0UsT0FBTyxFQUFDLHVCQUF1QixFQUFDLE1BQU0sWUFBWSxDQUFDO0FBR25ELFFBQVEsQ0FBQyxxQkFBcUIsRUFBRTtJQUM5QixRQUFRLENBQUMsaUJBQWlCLEVBQUU7UUFDMUIsRUFBRSxDQUFDLHVEQUF1RCxFQUFFO1lBQzFELElBQU0sS0FBSyxHQUFHLHVCQUF1QixDQUFDO2dCQUNwQyxJQUFJLEVBQUUsT0FBTztnQkFDYixRQUFRLEVBQUU7b0JBQ1IsQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUM7aUJBQ3JEO2FBQ0YsQ0FBQyxDQUFDO1lBQ0gsSUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx5RkFBeUYsRUFBRTtZQUM1RixJQUFNLEtBQUssR0FBRyx1QkFBdUIsQ0FBQztnQkFDcEMsSUFBSSxFQUFFLE9BQU87Z0JBQ2IsUUFBUSxFQUFFO29CQUNSLENBQUMsRUFBRSxFQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxRQUFR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QUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDOUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztnQkFDL0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ2pELE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDakQsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ2pELE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDakQsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ2pELE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDakQsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDbkQsQ0FBQyxDQUFDLENBQUM7WUFDSCxFQUFFLENBQUMsNkVBQTZFLEVBQUU7Z0JBQ2hGLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDN0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDOUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztnQkFDL0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztnQkFDOUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUM5QyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztnQkFDOUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztnQkFDakQsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUMvQyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQy9DLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztnQkFDL0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUMvQyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDakQsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGVBQWUsRUFBRTtRQUN4QixFQUFFLENBQUMsaURBQWlELEVBQUU7WUFDcEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7UUFDcEUsQ0FBQyxDQUFDLENBQUM7UUFHSCxFQUFFLENBQUMscURBQXFELEVBQUU7WUFDeEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsd0RBQXdELEVBQUU7WUFDM0QsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7WUFDbEUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7UUFDcEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNENBQTRDLEVBQUU7WUFDL0MsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7WUFDOUQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7UUFDbkUsQ0FBQyxDQUFDLENBQUM7UUFHSCxFQUFFLENBQUMscURBQXFELEVBQUU7WUFDeEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7WUFDNUQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsd0RBQXdELEVBQUU7WUFDM0QsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7WUFDaEUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7UUFDbEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsd0RBQXdELEVBQUU7WUFDM0QsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7WUFDaEUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7UUFDbEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6cXVvdGVtYXJrICovXG5cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICdjaGFpJztcblxuaW1wb3J0ICogYXMgZW5jb2RlIGZyb20gJy4uLy4uLy4uL3NyYy9jb21waWxlL2F4aXMvZW5jb2RlJztcbmltcG9ydCB7bGFiZWxBbGlnbiwgbGFiZWxCYXNlbGluZX0gZnJvbSAnLi4vLi4vLi4vc3JjL2NvbXBpbGUvYXhpcy9lbmNvZGUnO1xuaW1wb3J0IHtwYXJzZVVuaXRNb2RlbFdpdGhTY2FsZX0gZnJvbSAnLi4vLi4vdXRpbCc7XG5cblxuZGVzY3JpYmUoJ2NvbXBpbGUvYXhpcy9lbmNvZGUnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdlbmNvZGUubGFiZWxzKCknLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBub3Qgcm90YXRlIGxhYmVsIGZvciB0ZW1wb3JhbCBmaWVsZCBieSBkZWZhdWx0JywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBtb2RlbCA9IHBhcnNlVW5pdE1vZGVsV2l0aFNjYWxlKHtcbiAgICAgICAgbWFyazogXCJwb2ludFwiLFxuICAgICAgICBlbmNvZGluZzoge1xuICAgICAgICAgIHg6IHtmaWVsZDogXCJhXCIsIHR5cGU6IFwidGVtcG9yYWxcIiwgdGltZVVuaXQ6IFwibW9udGhcIn1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBsYWJlbHMgPSBlbmNvZGUubGFiZWxzKG1vZGVsLCAneCcsIHt9LCAnYm90dG9tJyk7XG4gICAgICBhc3NlcnQuaXNVbmRlZmluZWQobGFiZWxzLmFuZ2xlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZG8gbm90IHJvdGF0ZSBsYWJlbCBmb3IgdGVtcG9yYWwgZmllbGQgaWYgbGFiZWxBbmdsZSBpcyBzcGVjaWZpZWQgaW4gYXhpcyBjb25maWcnLCBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IG1vZGVsID0gcGFyc2VVbml0TW9kZWxXaXRoU2NhbGUoe1xuICAgICAgICBtYXJrOiBcInBvaW50XCIsXG4gICAgICAgIGVuY29kaW5nOiB7XG4gICAgICAgICAgeDoge2ZpZWxkOiBcImFcIiwgdHlwZTogXCJ0ZW1wb3JhbFwiLCB0aW1lVW5pdDogXCJtb250aFwifVxuICAgICAgICB9LFxuICAgICAgICBjb25maWc6IHtheGlzWDoge2xhYmVsQW5nbGU6IDkwfX1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgbGFiZWxzID0gZW5jb2RlLmxhYmVscyhtb2RlbCwgJ3gnLCB7fSwgJ2JvdHRvbScpO1xuICAgICAgYXNzZXJ0LmlzVW5kZWZpbmVkKGxhYmVscy5hbmdsZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgY29ycmVjdCB0ZXh0LnNpZ25hbCBmb3IgcXVhcnRlciB0aW1lVW5pdHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBtb2RlbCA9IHBhcnNlVW5pdE1vZGVsV2l0aFNjYWxlKHtcbiAgICAgICAgbWFyazogXCJwb2ludFwiLFxuICAgICAgICBlbmNvZGluZzoge1xuICAgICAgICAgIHg6IHtmaWVsZDogXCJhXCIsIHR5cGU6IFwidGVtcG9yYWxcIiwgdGltZVVuaXQ6IFwicXVhcnRlclwifVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGxhYmVscyA9IGVuY29kZS5sYWJlbHMobW9kZWwsICd4Jywge30sICdib3R0b20nKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkID0gXCInUScgKyBxdWFydGVyKGRhdHVtLnZhbHVlKVwiO1xuICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVscy50ZXh0LnNpZ25hbCwgZXhwZWN0ZWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgdGV4dC5zaWduYWwgZm9yIHllYXJxdWFydGVybW9udGggdGltZVVuaXRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgbW9kZWwgPSBwYXJzZVVuaXRNb2RlbFdpdGhTY2FsZSh7XG4gICAgICAgIG1hcms6IFwicG9pbnRcIixcbiAgICAgICAgZW5jb2Rpbmc6IHtcbiAgICAgICAgICB4OiB7ZmllbGQ6IFwiYVwiLCB0eXBlOiBcInRlbXBvcmFsXCIsIHRpbWVVbml0OiBcInllYXJxdWFydGVybW9udGhcIn1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBsYWJlbHMgPSBlbmNvZGUubGFiZWxzKG1vZGVsLCAneCcsIHt9LCAnYm90dG9tJyk7XG4gICAgICBjb25zdCBleHBlY3RlZCA9IFwiJ1EnICsgcXVhcnRlcihkYXR1bS52YWx1ZSkgKyAnICcgKyB0aW1lRm9ybWF0KGRhdHVtLnZhbHVlLCAnJWIgJVknKVwiO1xuICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVscy50ZXh0LnNpZ25hbCwgZXhwZWN0ZWQpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbGFiZWxBbGlnbicsICgpID0+IHtcbiAgICBkZXNjcmliZSgnaG9yaXpvbnRhbCBvcmllbnRzJywgKCkgPT4ge1xuICAgICAgaXQoJzM2MCBkZWdyZWUgY2hlY2sgZm9yIGhvcml6b25hdGFsIG9yaWVudHMgcmV0dXJuIHRvIHNlZSBpZiB0aGV5IG9yaWVudCBwcm9wZXJseScsICgpID0+IHtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMCwgJ3RvcCcpLCAnY2VudGVyJyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDE1LCAndG9wJyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigzMCwgJ3RvcCcpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oNDUsICd0b3AnKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDYwLCAndG9wJyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbig3NSwgJ3RvcCcpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oOTAsICd0b3AnKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDEwNSwgJ3RvcCcpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMTIwLCAndG9wJyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigxMzUsICd0b3AnKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDE1MCwgJ3RvcCcpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMTY1LCAndG9wJyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigxODAsICd0b3AnKSwgJ2NlbnRlcicpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigxOTUsICdib3R0b20nKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDIxMCwgJ2JvdHRvbScpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMjI1LCAnYm90dG9tJyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigyNDAsICdib3R0b20nKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDI1NSwgJ2JvdHRvbScpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMjcwLCAnYm90dG9tJyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigyODUsICdib3R0b20nKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDMwMCwgJ2JvdHRvbScpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMzE1LCAnYm90dG9tJyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigzMzAsICdib3R0b20nKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDM0NSwgJ2JvdHRvbScpLCAncmlnaHQnKTtcbiAgICAgIH0pO1xuICAgICAgaXQoJzM2MCBkZWdyZWUgY2hlY2sgZm9yIHZlcnRpY2FsIG9yaWVudHMgcmV0dXJuIHRvIHNlZSBpZiB0aGV5IG9yaWVudCBwcm9wZXJseScsICgpID0+IHtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMCwgJ2xlZnQnKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDE1LCAnbGVmdCcpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMzAsICdsZWZ0JyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbig0NSwgJ2xlZnQnKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDYwLCAnbGVmdCcpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oNzUsICdsZWZ0JyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbig5MCwgJ2xlZnQnKSwgJ2NlbnRlcicpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigxMDUsICdsZWZ0JyksICdsZWZ0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDEyMCwgJ2xlZnQnKSwgJ2xlZnQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMTM1LCAnbGVmdCcpLCAnbGVmdCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigxNTAsICdsZWZ0JyksICdsZWZ0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDE2NSwgJ2xlZnQnKSwgJ2xlZnQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMTgwLCAnbGVmdCcpLCAnbGVmdCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigxOTUsICdyaWdodCcpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMjEwLCAncmlnaHQnKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDIyNSwgJ3JpZ2h0JyksICdyaWdodCcpO1xuICAgICAgICBhc3NlcnQuZXF1YWwobGFiZWxBbGlnbigyNDAsICdyaWdodCcpLCAncmlnaHQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMjU1LCAncmlnaHQnKSwgJ3JpZ2h0Jyk7XG4gICAgICAgIGFzc2VydC5lcXVhbChsYWJlbEFsaWduKDI3MCwgJ3JpZ2h0JyksICdjZW50ZXInKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMjg1LCAncmlnaHQnKSwgJ2xlZnQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMzAwLCAncmlnaHQnKSwgJ2xlZnQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMzE1LCAncmlnaHQnKSwgJ2xlZnQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMzMwLCAncmlnaHQnKSwgJ2xlZnQnKTtcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGxhYmVsQWxpZ24oMzQ1LCAncmlnaHQnKSwgJ2xlZnQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbGFiZWxCYXNlbGluZScsICgpID0+IHtcbiAgICBpdCgnaXMgbWlkZGxlIGZvciBwZXJwZW5kaWN1bGFycyBob3Jpem9udGFsIG9yaWVudHMnLCAoKSA9PiB7XG4gICAgICBhc3NlcnQuZGVlcEVxdWFsKGxhYmVsQmFzZWxpbmUoOTAsICd0b3AnKSwge3ZhbHVlOiAnbWlkZGxlJ30pO1xuICAgICAgYXNzZXJ0LmRlZXBFcXVhbChsYWJlbEJhc2VsaW5lKDI3MCwgJ2JvdHRvbScpLCB7dmFsdWU6ICdtaWRkbGUnfSk7XG4gICAgfSk7XG5cblxuICAgIGl0KCdpcyB0b3AgZm9yIGJvdHRvbSBvcmllbnRzIGZvciAxc3QgYW5kIDR0aCBxdWFkcmFudHMnLCAoKSA9PiB7XG4gICAgICBhc3NlcnQuZGVlcEVxdWFsKGxhYmVsQmFzZWxpbmUoNDUsICdib3R0b20nKSwge3ZhbHVlOiAndG9wJ30pO1xuICAgICAgYXNzZXJ0LmRlZXBFcXVhbChsYWJlbEJhc2VsaW5lKDE4MCwgJ3RvcCcpLCB7dmFsdWU6ICd0b3AnfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnaXMgYm90dG9tIGZvciBib3R0b20gb3JpZW50cyBmb3IgMm5kIGFuZCAzcmQgcXVhZHJhbnRzJywgKCkgPT4ge1xuICAgICAgYXNzZXJ0LmRlZXBFcXVhbChsYWJlbEJhc2VsaW5lKDEwMCwgJ2JvdHRvbScpLCB7dmFsdWU6ICdtaWRkbGUnfSk7XG4gICAgICBhc3NlcnQuZGVlcEVxdWFsKGxhYmVsQmFzZWxpbmUoMjYwLCAnYm90dG9tJyksIHt2YWx1ZTogJ21pZGRsZSd9KTtcbiAgICB9KTtcblxuICAgIGl0KCdpcyBtaWRkbGUgZm9yIDAgYW5kIDE4MCBob3Jpem9udGFsIG9yaWVudHMnLCAoKSA9PiB7XG4gICAgICBhc3NlcnQuZGVlcEVxdWFsKGxhYmVsQmFzZWxpbmUoMCwgJ2xlZnQnKSwge3ZhbHVlOiAnbWlkZGxlJ30pO1xuICAgICAgYXNzZXJ0LmRlZXBFcXVhbChsYWJlbEJhc2VsaW5lKDE4MCwgJ3JpZ2h0JyksIHt2YWx1ZTogJ21pZGRsZSd9KTtcbiAgICB9KTtcblxuXG4gICAgaXQoJ2lzIHRvcCBmb3IgYm90dG9tIG9yaWVudHMgZm9yIDFzdCBhbmQgMm5kIHF1YWRyYW50cycsICgpID0+IHtcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwobGFiZWxCYXNlbGluZSg4MCwgJ2xlZnQnKSwge3ZhbHVlOiAndG9wJ30pO1xuICAgICAgYXNzZXJ0LmRlZXBFcXVhbChsYWJlbEJhc2VsaW5lKDEwMCwgJ2xlZnQnKSwge3ZhbHVlOiAndG9wJ30pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2lzIGJvdHRvbSBmb3IgYm90dG9tIG9yaWVudHMgZm9yIDNyZCBhbmQgNHRoIHF1YWRyYW50cycsICgpID0+IHtcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwobGFiZWxCYXNlbGluZSgyODAsICdsZWZ0JyksIHt2YWx1ZTogJ2JvdHRvbSd9KTtcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwobGFiZWxCYXNlbGluZSgyNjAsICdsZWZ0JyksIHt2YWx1ZTogJ2JvdHRvbSd9KTtcbiAgICB9KTtcblxuICAgIGl0KCdpcyBib3R0b20gZm9yIGJvdHRvbSBvcmllbnRzIGZvciAzcmQgYW5kIDR0aCBxdWFkcmFudHMnLCAoKSA9PiB7XG4gICAgICBhc3NlcnQuZGVlcEVxdWFsKGxhYmVsQmFzZWxpbmUoMjgwLCAnbGVmdCcpLCB7dmFsdWU6ICdib3R0b20nfSk7XG4gICAgICBhc3NlcnQuZGVlcEVxdWFsKGxhYmVsQmFzZWxpbmUoMjYwLCAnbGVmdCcpLCB7dmFsdWU6ICdib3R0b20nfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=